<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
    <head>
      <title>comehere-글작성</title>
        
      <!-- basic -->
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <!-- mobile metas -->
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="viewport" content="initial-scale=1, maximum-scale=1">
      <!-- site metas -->
      <title>Contact</title>
      <meta name="keywords" content="">
      <meta name="description" content="">
      <meta name="author" content="">
      <!-- bootstrap css -->
      <link rel="stylesheet" type="text/css" href="../css/bootstrap.min.css">
      <!-- style css -->
      <link rel="stylesheet" type="text/css" href="../css/style.css">
      <!-- Responsive-->
      <link rel="stylesheet" href="../css/responsive.css">
      <!-- fevicon -->
      <link rel="icon" href="../images/fevicon.png" type="image/gif" />
      <!-- Scrollbar Custom CSS -->
      <link rel="stylesheet" href="../css/jquery.mCustomScrollbar.min.css">
      <!-- Tweaks for older IEs-->
      <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
      <!-- owl stylesheets --> 
      <link rel="stylesheet" href="../css/owl.carousel.min.css">
      <!-- <link rel="stylesheet" href="../css/owl.theme.default.min.css"> -->
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css" media="screen">
      
      <!-- 공식부트스트랩 CSS -->
      <link href="../css/bootstrap/bootstrap.css" rel="stylesheet">

<!--          
        <script src="//code.jquery.com/jquery-3.3.1.min.js"></script>
        <script src="../js/summernote/summernote-lite.js"></script>
        <script src="../js/summernote/lang/summernote-ko-KR.js"></script>
        <link rel="stylesheet" href="../css/summernote/summernote-lite.css"> 
 -->
      <!-- summernote 관련 소스 -->
      <link href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" rel="stylesheet">
      <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
      <script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
      <link href="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.css" rel="stylesheet">
      <script src="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.js"></script>
      
      <style>
        .our_textJD {
        width: 100%;
        float: left;
        font-size: 36px;
        color: #121111;
        text-transform: uppercase;
        text-align: center;
        padding-top: 90px;
        }
        
        .furnitures_sectionJD {
            width: 100%;
            min-height: 1300px;
            float: left;
            padding-bottom: 90px;
        }
        
        .write-box {
          border: 2px, black;
          padding-top: 30px;
          padding-left: 87%;
        }
        .page_center {
          display : flex;
          margin : auto;
          /* width: 42px; */
        }
        .title-min-width {
          min-width: 700px;
        }
        
        .btn-outline-successJD {
          color: #0d6efd;
          background-color: transparent;
          background-image: none;
          border-color: #0d6efd;
        }
        .btn-outline-successJD:hover {
          color: #fff;
          background-color: #0d6efd;
          border-color: #0d6efd;
        }
        .cate-bottom-line {
          border-bottom: 1px solid black;
          border-top: 1px solid black;
        }
        
        #community-title {
          color: #ffb607;
        }
        

        
      </style>
      
    </head>
    
    <body>
  <!-- header section start -->
  <div class="header_section">
    <div class="container-fluid">
      <nav class="navbar navbar-expand-lg navbar-light">
        <div class="main_logo"><a href="/app"><img src="../images/logo.png"></a></div>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item"><a class="nav-link" href="../party/list">운동찾기</a></li>
            <li class="nav-item"><a class="nav-link" href="main">커뮤니티</a></li>
            <li class="nav-item"><a class="nav-link" href="../notice/list">공지사항</a></li>
          </ul>
          <div class="login-bt">
            <ul>
              <li data-th-if="${session.loginMember == null}"><a href="../auth/form" >로그인</a></li>
              <li data-th-if="${session.loginMember != null}"><a href="../mypage/my-post">마이페이지</a></li>
              <li data-th-if="${session.loginMember != null}"><a href="../auth/logout" data-th-text="${session.loginMember.name} + '(로그아웃)'">동동(로그아웃)</a></li>
            </ul>
          </div>
        </div>
      </nav>
    </div>
  </div>
  <!-- header section end -->
      
      <!-- furnitures section start -->
      <div class="furnitures_sectionJD layout_padding">
         <a href="main"><h1 class="container" id="community-title">커뮤니티</h1></a>
         <div class="container cate-bottom-line">
           <!-- 게시판 카테고리 이동 시작 -->
           <ul class="nav nav-pills nav-justified">
             <li class="nav-item"><a class="nav-link" href="list?no=1">자유게시판</a></li>
             <li class="nav-item"><a class="nav-link" href="list?no=2">식단게시판</a></li>
             <li class="nav-item"><a class="nav-link" href="list?no=3">챌린지게시판</a></li>
             <li class="nav-item"><a class="nav-link" href="list?no=4">질문게시판</a></li>
             <li class="nav-item"><a class="nav-link" href="list?no=5">핫딜게시판</a></li>
           </ul>
           <!-- 게시판 카테고리 이동 끝 -->

        <!-- main_글작성 -->
            <section class="section_top">
                <div id="sub_title">
                    <h2>글작성</h2>
                </div>
            </section>

            <section class="post_wrap">
                <form
                    class="post_max_box"
                    action='add'
                    method="post"
                    enctype="multipart/form-data">
                    <table class="table_form">
                        <tr>
                            <td><input id='cateno' type="hidden" name="cateno" data-th-value="${category.cateno}"></td>
                        </tr>
                        <tr>
                            <td><input
                                style="background-color: white;"
                                class="post_form1"
                                name='title'
                                type='text'
                                placeholder="제목을 입력해주세요.">
                            </td>
                        </tr>
                        <tr data-th-if="${category.cateno == 3}">
                            <img id="previewImg" src="">
                            <td><b>[사진 인증]</b><input id="fileTag" class="post_form1" name='file' type="file"></td>
                        </tr>
                        <tr data-th-if="${category.cateno != 3}">
                            <td><input class="post_form1" name='file' type="file" style="display:none;"></td>
                        </tr>
                        <tr>
                            <td>
                                <textarea class="form-content" id="summernote" name="content"></textarea>
                            </td>
                        </tr>
                    </table>
                    <div class="post_button_box">
                        <input id="subBtn" type="button" value="등록" onclick="goWrite(this.form);"/>
                        <input id="subBtn" type="button" value="취소" onclick="insertCancel()"/>
                        <!-- <input id="subBtn" type="button" value="취소" th:onclick="|location.href='@{list(no=${category.cateno})}'|"/> -->
                    </div>
                </form>
            </section>
        
        </div>
      </div>
        
      <!-- copyright section start -->
      <div class="copyright_section">
      <div class="container">
         <div class="social_icon">
            <ul>
               <li><a href="#"><img src="../images/fb-icon.png"></a></li>
               <li><a href="#"><img src="../images/twitter-icon.png"></a></li>
               <li><a href="#"><img src="../images/instagram-icon.png"></a></li>
               <li><a href="#"><img src="../images/linkedin-icon.png"></a></li>
            </ul>
         </div>
         <p class="copyright_text">2020 All Rights Reserved. Design by <a href="https://html.design">Free html  Templates</a></p>
      </div>
      <!-- copyright section end -->
      
      <!-- Javascript files-->
      <!-- <script src="../js/jquery.min.js"></script> -->
      <!-- <script src="../js/popper.min.js"></script> -->
      <!-- <script src="../js/bootstrap.bundle.min.js"></script> -->
      <!-- <script src="../js/jquery-3.0.0.min.js"></script> -->
      <!-- <script src="../js/plugin.js"></script> -->
      
      <!-- sidebar -->
      <!-- <script src="../js/jquery.mCustomScrollbar.concat.min.js"></script> -->
      <!-- <script src="../js/custom.js"></script> -->
      
      <!-- javascript --> 
      <!-- <script src="../js/owl.carousel.js"></script> -->
      <!-- <script src="https:cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>  -->
      
      <!-- 공식부트스트랩 JS -->
      <!-- <script src="../js/bootstrap/bootstrap.js"></script>    -->
      <!-- sweetalert -->
      <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

         
      <script>
      /*  summernote submit메서드 */ 
       function goWrite(frm) {
           var title = frm.title.value;
           var content = frm.content.value;
           if (title.trim() == '') {
        	   swal('','제목을 입력해주세요','warning');
        	       return false;
           }
           if (content.trim() == '') {
        	   swal('','내용을 입력해주세요','warning').then(() =>{
                 return false;
             });
           } else {
               swal({
                   text : "게시글을 등록하시겠습니까?",
                   icon : "info",
                   buttons : ["아니요", "예"],
                 }).then(function(isConfirm) {
                   if (isConfirm) {
                	   frm.submit();
                   } else{
                     return false;
                   }
               });
           }

       }
      
      
        $(document).ready(function() {
           $('textarea').summernote({height: 700});
        });
      </script>
      
      <script type="text/javascript">
      const cateNo = document.getElementById('cateno').value;
      
$('#fileTag').on('change', function () {
    if(window.FileReader){
       
    } else {
        var filename = $(this).val().split('/').pop().split('\\').pop();
    }
    $(this).prev().val(filename); //input upload-name 에 파일명 설정해주기

    readImage($(this)[0]); //미리보기
});

function validFileType(filename) {
    const fileTypes = ["png", "jpg", "jpeg"];
return fileTypes.indexOf(filename.substring(filename.lastIndexOf(".")+1, filename.length).toLowerCase()) >= 0;
}

function validFileSize(file){
    if(file.size > 5000000){ //5MB
        return false;
    }else{
        return true;
    }
}

//이미지 띄우기
function readImage(input) {
    if(input.files && input.files[0]) {
        const reader = new FileReader();
        reader.onload = function(e){
            const previewImage = document.getElementById("previewImg");
            previewImage.src = e.target.result;
        }
        // reader가 이미지 읽도록 하기
        reader.readAsDataURL(input.files[0]);
    }
}
function insertCancel() {
	swal({
        text : "게시글을 등록을 취소하시겠습니까?",
        icon : "info",
        buttons : ["아니요", "예"],
      }).then(function(isConfirm) {
        if (isConfirm) {
        	location.href='list?no=' + cateNo;
        } else{
          return false;
        }
    });
}

</script>

    </body>

</html>