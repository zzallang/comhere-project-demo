<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
    <head>
<title>여기모여</title>
      <!-- basic -->
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <!-- <meta name="viewport" content="width=device-width, initial-scale=1"> -->
      <!-- mobile metas -->
      <!-- <meta name="viewport" content="width=device-width, initial-scale=1"> -->
      <!-- <meta name="viewport" content="initial-scale=1, maximum-scale=1"> -->
      <!-- site metas -->
      <!-- bootstrap css -->
      <link rel="stylesheet" type="text/css" href="../css/bootstrap.min.css">
      <!-- style css -->
      <link rel="stylesheet" type="text/css" href="../css/style.css">
      <!-- Responsive-->
      <!-- <link rel="stylesheet" href="../css/responsive.css"> -->
      <!-- fevicon -->
      <link rel="icon" href="../images/comehere_con.ico" type="image/gif" />
      <!-- Scrollbar Custom CSS --> 
      <!-- <link rel="stylesheet" href="../css/jquery.mCustomScrollbar.min.css"> -->
      <!-- Tweaks for older IEs-->
      <!-- <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css"> -->
      <!-- owl stylesheets --> 
      <!-- <link rel="stylesheet" href="../css/owl.carousel.min.css"> -->
      <!-- <link rel="stylesheet" href="../css/owl.theme.default.min.css"> -->
      <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css" media="screen"> -->
      
      <!-- 공식부트스트랩 CSS -->
      <link href="../css/bootstrap/bootstrap.css" rel="stylesheet">
      
      <style>
      .windowWidth {
        max-width:1130px !important;
        min-width:1130px !important;
        margin: auto !important;
        float: none !important;
      }
      .mainList-title {
        font-size: 27px;
        font-weight: bold;
        margin-bottom:  25px;
      }
      .furnitures_sectionJD {
          width: 100%;
          min-height: 1000px;
          float: left;
          padding-bottom: 90px;
      }
      .row2 {
        /* width: 100%; */
        float: left;
        margin-bottom: 100px;
      }
      .clg {
        display:inline-block;
        min-height: 338px;
        min-width: 19.6%;
        padding:10px;
        border: 1px solid #eaedf4;
        border-radius: 12px;          
      }
            .clg-in-img {
        width: 188.398px;
        min-height: 240px;
        max-height: 240px; 
        border-radius: 12px;
        object-fit: cover; 
      }
      .clg-in-title {
        position: relative;
        height: 35px;
        width:100%;
      }
      .clg-in-tt {
        font-weight: bold;
        margin: 0 10px 0 10px;
        width: 170px;
        min-height: 100%;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        line-height: 35px;
      }
      .clg-in-wt {
        margin: 0 15px 0 10px;
        width: 170px;
        min-height: 50%;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        line-height: 22px;
        font-size: 15px;
        color: black;
      }
      .clg-in-v-d {
        margin: 0 15px 0 10px;
        width: 170px;
        min-height: 50%;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        line-height: 22px;
        font-size: 15px;
        color: gray;
      }
      .search-border {
        border: 1px solid #ced4da !important;
      }
      
      .nav-line {
        border-bottom: 1px solid #e4e8eb;
        border-top: 1px solid #e4e8eb;
        margin-bottom: 30px;
      }
      .category-name-wrapper {
        border: 1px solid #e4e8eb;
        background-color: rgb(125, 144, 197);
        height: 300px;
      }
      .our_textJD_clg {
        background-image: url("../images/clg-banner1.png");
        width: 100%;
        height : 100%;
        line-height:300px;
        float: left;
        font-size: 45px;
        font-weight:bold;
        color: white;
        text-transform: uppercase;
        text-align: center;
        /* padding-top: 120px; */
        }
      
        .our_textJD {
        width: 100%;
        float: left;
        font-size: 36px;
        color: #121111;
        text-transform: uppercase;
        text-align: center;
        padding-top: 90px;
        }
        
        .write-box {
          border: 2px, black;
          padding-top: 30px;
          padding-left: 92%;
        }
        .page_center {
          display : flex;
          margin : auto;
          /* width: 42px; */
        }
        .title-min-width {
          min-width: 700px;
        }
        
        .btn-outline-successJD {
          color: #0d6efd;
          background-color: transparent;
          background-image: none;
          border-color: #0d6efd;
        }
        .btn-outline-successJD:hover {
          color: #fff;
          background-color: #0d6efd;
          border-color: #0d6efd;
        }
        
        .jd1 {
          background-color: gray;
          width: 300px;
          height: 300px;
          margin: 10px;
        }
        
        .imgJD {
          width: 300px;
          height: 300px;
          object-fit: cover;
          margin: auto;
          display: block;
        }
        
        .imgJD:hover {
          color: #fff;
          background-color: #0d6efd;
          border-color: #0d6efd;
        }
        
        #boardTitle {
          font-size: 20px;
          font-weight: bold;
        }
        
        .cate-bottom-line {
          border-bottom: 1px solid black;
          border-top: 1px solid black;
        }
        
        #community-title {
          color: #ffb607;
        }
        .temp-height {
          min-height: 500px;
        }
        .form-selectJd {
          margin-left: 45px;
          margin-right: 8px;
          display: block;
          width: 20%;
          padding: 0.375rem 2.25rem 0.375rem 0.75rem;
          -moz-padding-start: calc(0.75rem - 3px);
          font-size: 1rem;
          font-weight: 400;
          line-height: 1.5;
          color: #212529;
          background-color: #fff;
          background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23343a40' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m2 5 6 6 6-6'/%3e%3c/svg%3e");
          background-repeat: no-repeat;
          background-position: right 0.75rem center;
          background-size: 16px 12px;
          border: 1px solid #ced4da;
          border-radius: 0.375rem;
          transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
          -webkit-appearance: none;
          -moz-appearance: none;
          appearance: none;
        }
        
        .swal-text {
          text-align: center;
        }
        </style> 
    </head>
    
<script>
  // 뒤로가기하면 자동으로 새로고침 (조회수 반영을 위해)
  window.onpageshow = function(e) {
    if (e.persisted || (window.performance && window.performance.navigation.type === 2)) {
      window.location.reload();
    }
  }
</script>
<body>
  <!-- header section start -->
  <div class="header_section windowWidth">
    <div class="container-fluid windowWidth">
      <nav class="navbar navbar-expand-lg navbar-light windowWidth">
        <div class="main_logo"><a href="/app"><img src="../images/logo.png"></a></div>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item"><a class="nav-link" href="../party/list">운동찾기</a></li>
            <li class="nav-item"><a class="nav-link" href="main">커뮤니티</a></li>
            <li class="nav-item"><a class="nav-link" href="../notice/list">공지사항</a></li>
          </ul>
          <div class="login-bt">
            <ul>
              <li data-th-if="${session.loginMember == null}"><a href="../auth/form" >로그인</a></li>
              <li class="loginId" th:if="${session.loginMember != null}" th:id=${session.loginMember.no}><a href="../mypage/my-post">마이페이지</a></li>
              <li data-th-if="${session.loginMember != null}"><a href="../auth/logout" data-th-text="${session.loginMember.name} + '(로그아웃)'">동동(로그아웃)</a></li>
            </ul>
          </div>
        </div>
      </nav>
    </div>
  </div>
  <!-- header section end -->
      
      <!-- furnitures section start -->
      <div class="board-clg-list-wrapper">
         <!-- <a href="main"><h1 class="container" id="community-title" >커뮤니티</h1></a> -->
         <div class="nav-line">
           <!-- 게시판 카테고리 이동 시작 -->
           <ul class="nav nav-pills nav-justified windowWidth">
             <li class="nav-item"><a class="nav-link" href="list?no=1">자유게시판</a></li>
             <li class="nav-item"><a class="nav-link" href="list?no=2">식단게시판</a></li>
             <li class="nav-item"><a class="nav-link" href="list?no=3">챌린지게시판</a></li>
             <li class="nav-item"><a class="nav-link" href="list?no=4">질문게시판</a></li>
             <li class="nav-item"><a class="nav-link" href="list?no=5">핫딜게시판</a></li>
           </ul>
          </div>
           <!-- 게시판 카테고리 이동 끝 -->
  
            <!-- 게시판 제목과 내용 -->
            <a data-th-href="@{list(no=${catenoInBoard.cateno})}">
            <div class="category-name-wrapper">
              <div class="our_textJD_clg windowWidth" id="cateName"></div>
            </div>
            </a>
            
            <div class="furnitures_sectionJD layout_padding windowWidth">
              <div class="container windowWidth">
                    <div style="min-width: 960px; max-width: 960px">
                     <span style="font-weight: lighter; float: left;" data-th-if="${search.keyword != null}" 
                          data-th-text="'&lsquo;' + ${search.typeName} + '&rsquo;' + '에 '   + '&lsquo;' + ${search.keyword} + '&rsquo;' +' 을(를) 포함한 검색결과 입니다.'">
                     </span>
                    </div>
                  <div class="row2">
                    <th:block th:each="board : ${list}">
                      <span class="clg" style="position:relative;">
                        <div class="clg-in">
                          <a th:href="@{detail(no=${board.no})}">
                          <div>
                            <img class="clg-in-img" th:if="${board.thumbnail == null}" src="../images/nothumbnail.png"/>
                            <img class="clg-in-img" th:if="${board.thumbnail != null}" th:src="@{'/board/files/' + ${board.thumbnail}}"/>
                          </div>
                          </a>
                          <div class="clg-in-title">
                            <div class="clg-in-tt">
                              <a href='detail?no=1' th:href="@{detail(no=${board.no})}" th:text="${board.title == ''} ? '(제목없음)' : ${board.title}">제목없음</a><br>
                            </div>
                            <div class="clg-in-wt">
                              <span th:text="${board.writer.nickname}" style="color: #444444;">유길동</span>
                            </div>
                            <div class="clg-in-v-d">
                              <img style="width: 10%;" src="../images/view-icon2.png"><span th:text="${board.viewCount}">17</span>
                              <span style="float: right;" th:text="${board.createdDate}">9 mins</span>
                            </div>
                          
                          </div>
                        </div>
                      </span>
                    </th:block>
                  <!-- 게시글 목록 끝 -->
                  <li class="write-box">
                    <div id="postButton" class="btn btn-primary" th:value="@{form(cateno=${catenoInBoard.cateno})}" role="button">글쓰기</div>
                  </li>
                
                  <!-- 페이징 버튼 시작 -->
                  <nav aria-label="Page navigation">
                    <ul class="pagination">
                      <div class="page_center">
                        <li class="page-item" th:if="${pageMaker.prev}">
                          <a class="page-link" th:href="@{list(pageMaker.startPage-1, no=${catenoInBoard.cateno})}" aria-label="Previous">
                            <span aria-hidden="true">&laquo;</span>
                          </a>
                        </li>
                        <th:block th:if="${pageMaker.endPage != 0}" th:each="pageNum: ${#numbers.sequence(pageMaker.startPage, pageMaker.endPage)}">
                          <li data-th-id="${'pageButton' + pageNum}"  class="page-item">
                            <a data-th-if="${search.keyword == null}" class="page-link" th:href="@{list(page=${pageNum}, no=${catenoInBoard.cateno})}"><i th:text="${pageNum}"></i></a>
                            <a data-th-if="${search.keyword != null}" class="page-link" th:href="@{list(page=${pageNum}, no=${catenoInBoard.cateno}, keyword=${search.keyword}, type=${search.type})}"><i th:text="${pageNum}"></i></a>
                          </li>
                        </th:block>
                        <li class="page-item" th:if="${pageMaker.next && pageMaker.endPage >0}">
                          <a data-th-if="${search.keyword == null}" class="page-link" th:href="@{list(page=${pageMaker.endPage+1}, no=${catenoInBoard.cateno})}" aria-label="Next">
                            <span aria-hidden="true">&raquo;</span>
                          </a>
                          <a data-th-if="${search.keyword != null}" class="page-link" th:href="@{list(page=${pageMaker.endPage+1}, no=${catenoInBoard.cateno}, keyword=${search.keyword}, type=${search.type})}" aria-label="Next">
                            <span aria-hidden="true">&raquo;</span>
                          </a>
                        </li>
                      </div>
                    </ul>
                  </nav>
                  <!-- 페이징 버튼 끝 -->
                 <nav class="navbar navbar-light windowWidth">
                 <div style="margin: auto">
                   <!-- 검색 버튼 시작 -->
                   <form class="form-inline" action='list' method="get">
                    <input data-th-value="${catenoInBoard.cateno}" type="hidden" name="no" aria-label="category">
                    <select id="searchId" class="form-selectJd" name="type">
                        <option value="T">제목</option>
                        <option value="C">내용</option>
                        <option value="W">작성자</option>
                        <option value="TC">제목 + 내용</option>
                        <option value="TW">제목 + 작성자</option>
                        <option value="TCW">제목 + 내용 + 작성자</option>
                    </select>  
                     <input class="form-control mr-sm-2 search-border" type="search" name="keyword" placeholder="Search" aria-label="Search">
                     <button class="btn btn-outline-successJD my-2 my-sm-0" type="submit" id="searchButton">Search</button>
                   </form>
                   <!-- 검색 버튼 끝 -->
                </div>
                 </nav>
            </div>
         </div>

        </div>
      </div>
      <!-- furnitures section end -->
      
     
      <!-- Javascript files-->
      <script src="../js/jquery.min.js"></script>
      <script src="../js/popper.min.js"></script>
      <script src="../js/bootstrap.bundle.min.js"></script>
      <script src="../js/jquery-3.0.0.min.js"></script>
      <script src="../js/plugin.js"></script>
      <!-- sidebar -->
      <script src="../js/jquery.mCustomScrollbar.concat.min.js"></script>
      <!-- <script src="../js/custom.js"></script> --><!-- 검색때매 우선 막자 --> 
      <!-- javascript --> 
      <!-- <script src="../js/owl.carousel.js"></script> -->
      <!-- <script src="https:cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>  -->
      
      <!-- 공식부트스트랩 JS -->
      <script src="../js/bootstrap/bootstrap.js"></script>   
      <!-- sweetalert -->
      <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

      <script>
      "use strict"
      document.getElementById('postButton').addEventListener('click', checkLogin);
      
      // 로그인 회원 번호 저장
      let loginMemberNo = -1;
      if($(".loginId").attr("id") != -1) {
       loginMemberNo = $(".loginId").attr("id");
      };
      
      // 비회원일때 로그인으로 유도
      function checkLogin() {
        if (loginMemberNo == undefined || loginMemberNo == -1) {
          swal({
            text :  "회원만 이용가능합니다.\n로그인하시겠습니까?",
            icon : "warning",
            buttons : ["아니요", "예"],
          }).then(function(isConfirm) {
            if (isConfirm) {
              location.href = '../auth/form';
            } else{
              return false;
            }
          });
        } else{
          location.href = $("#postButton").attr("value"); 
        }
      }
      
      // 검색기능 목록일 때 검색조건의 type을 selected하기 위한 메서드 
      const searchOption = $("select").children();
      for (let i = 0; i < searchOption.length; i++) {
        if (searchOption.eq(i).val() == "[[${search.type}]]") {
          $('#searchId').find("option").eq(i).attr("selected", true)
        }
      }
      
      window.addEventListener('DOMContentLoaded', function findCategory() {
    	  var param = window.location.search.match(/no=([^&]*)/)[1];
          switch(param) {
            case '1' :
              document.getElementById( 'cateName' ).innerHTML = "자유게시판";
              break;
            case '2' :
              document.getElementById( 'cateName' ).innerHTML = "식단게시판";
              break;
            case '3' :
              document.getElementById( 'cateName' ).innerHTML = "챌린지게시판";
              break;
            case '4' :
              document.getElementById( 'cateName' ).innerHTML = "질문게시판";
              break;
            case '5' :
              document.getElementById( 'cateName' ).innerHTML = "핫딜게시판";
        }
      });
      
      window.addEventListener('DOMContentLoaded', function(){
    	  var param = 1; 
    	  if (window.location.search.match(/page=([^&]*)/) != null) {
    		  param = window.location.search.match(/page=([^&]*)/)[1];
    	  } 
    	  $('#pageButton' + param).addClass('active');
    	});
      

      </script>
   </body> 
</html>